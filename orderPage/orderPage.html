<!DOCTYPE html>
<html lang="en">
    
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../../style/bootstrap-4.0.0-dist/css/bootstrap.css"/>
        <link rel="stylesheet" href="../../style/bootstrap-4.0.0-dist/css/bootstrap.min.css"/>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <script src="../../style/bootstrap-4.0.0-dist/js/bootstrap.js"></script>
        <script src="../../style/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>

        <link rel="stylesheet" href="../../GlobalStyle.css" />
        <link rel="stylesheet" href="./orderPage.css" />

        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
        
        <link rel="stylesheet" href="orderPage.css">
       
        <title>Document</title>
    </head>

    <body>

        <header class="custom-header">
            <div class="container">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="navbar-brand" href="#">
                        <img
                            src="../../img/logo.png"
                            alt="#"
                            class="custom-logo"
                        />
                    </a>
                    <button
                        class="navbar-toggler"
                        type="button"
                        data-toggle="collapse"
                        data-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                    >
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div
                        class="collapse navbar-collapse"
                        id="navbarSupportedContent"
                    >
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="#">Trang chủ</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Lưu chú</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Cơ sở vật chất</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Ưu đãi</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Về chúng</a>
                            </li>
                        </ul>
                        <button type="button" class="btn custom-btn">
                            <span class="material-symbols-outlined">
                                account_circle
                            </span>
                            <a href="../profilePage/profile.html"
                                ><span>Tài khoản của tôi</span></a
                            >
                        </button>
                    </div>
                </nav>
            </div>
        </header>

        <div class="container mt-4 ">
            <div class="row">
                <div class="col-md-8">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h3 class="card-title" id="cartTitle">Xe đẩy hàng của quý khách (0)</h3>
                        </div>
                    </div>
    
                    <div class="card mb-3">
                        <div class="row ">
                            <div class="col-md-2">
                                <img src="../../img/orderPage_img/h2.png" alt="Tên sản phẩm" class="img-fluid">
                            </div>
                            <div class="col-md-10">
                                <div class="card-body">
                                    <button class="btn float-right btn-delete"><i class="bi bi-trash"></i></button>
                                    <h5 class="card-title">Goldient Boutique Hotel</h5>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <p class="card-text">★★★★★</p>
                                        </div>
                                        <div class="col-md-9">
                                            <p class="address"><i class="fa fa-map-marker"></i> Đà Lạt</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="rounded-pill bg-custom px-1 py-1 mr-3">
                                            <p class="mb-0" >8.4</p>
                                        </div>
                                        <p class="mb-0 mr-3" style="color: #0062ff; font-weight: bold;">Tuyệt vời</p>
                                        <p class="mb-0">2000 nhận xét</p>
                                    </div>
                                    <hr>
                                    <p><i class="bi bi-calendar3"></i> 9 tháng 5 năm 2024 — 10 tháng 5 năm 2024</p>
                                    <p><i class="bi bi-person-fill"></i> Khách: 1 người lớn</p>
                                    <p><i class="fa fa-cutlery"></i> Có ăn sáng</p>
                                    <div class="price text-right">
                                        <div>
                                            <p class="original-price fw-bold mb-0" style="font-size: large;">1,946,160 đ
                                            </p>
                                            <p class="discounted-price">Bao gồm thuế và phí</p>
                                        </div>
                                    </div>
                                    <input type="checkbox" class="product-checkbox"> <span>Chọn sản phẩm này</span>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="card mb-3">
                        <div class="row">
                            <div class="col-md-2">
                                <img src="../../img/orderPage_img/h1.png"
                                    alt="Tên sản phẩm" class="img-fluid">
                            </div>
                            <div class="col-md-10">
                                <div class="card-body">
                                    <button class="btn float-right btn-delete"><i class="bi bi-trash"></i></button>
                                    <h5 class="card-title">River Prince Hotel</h5>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <p class="card-text">★★★★★</p>
                                        </div>
                                        <div class="col-md-9">
                                            <p class="address"><i class="fa fa-map-marker"></i> Đà Lạt</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="rounded-pill bg-custom px-1 py-1 mr-3">
                                            <p class="mb-0">8.4</p>
                                        </div>
                                        <p class="mb-0 mr-3" style="color: #0062ff; font-weight: bold;">Tuyệt vời</p>
                                        <p class="mb-0">2000 nhận xét</p>
                                    </div>
                                    <hr>
                                    <p><i class="bi bi-calendar3"></i> 9 tháng 5 năm 2024 — 10 tháng 5 năm 2024</p>
                                    <p><i class="bi bi-person-fill"></i> Khách: 1 người lớn</p>
                                    <p><i class="fa fa-cutlery"></i> Có ăn sáng</p>
                                    <div class="price text-right">
                                        <div>
                                            <p class="original-price fw-bold mb-0" style="font-size: larger;">1,827,000 đ
                                            </p>
                                            <p class="discounted-price">Bao gồm thuế và phí</p>
                                        </div>
                                    </div>
                                    <input type="checkbox" class="product-checkbox"> <span>Chọn sản phẩm này</span>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="card mb-3">
                        <div class="row ">
                            <div class="col-md-2">
                                <img src="../../img/orderPage_img/h3.png"
                                    alt="Tên sản phẩm" class="img-fluid">
                            </div>
                            <div class="col-md-10">
                                <div class="card-body">
                                    <button class="btn float-right btn-delete"><i class="bi bi-trash"></i></button>
                                    <h5 class="card-title">Muong Thanh Dalat Hotel</h5>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <p class="card-text">★★★★★</p>
                                        </div>
                                        <div class="col-md-9">
                                            <p class="address"><i class="fa fa-map-marker"></i> Đà Lạt</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <div class="rounded-pill bg-custom px-1 py-1 mr-3">
                                            <p class="mb-0">8.4</p>
                                        </div>
                                        <p class="mb-0 mr-3" style="color: #0062ff; font-weight: bold;">Tuyệt vời</p>
                                        <p class="mb-0">2000 nhận xét</p>
                                    </div>
                                    <hr>
                                    <p><i class="bi bi-calendar3"></i> 9 tháng 5 năm 2024 — 10 tháng 5 năm 2024</p>
                                    <p><i class="bi bi-person-fill"></i> Khách: 1 người lớn</p>
                                    <p><i class="fa fa-cutlery"></i> Có ăn sáng</p>
                                    <div class="price text-right">
                                        <div>
                                            <p class="original-price fw-bold mb-0" style="font-size: larger;">3,388,720 đ
                                            </p>
                                            <p class="discounted-price">Bao gồm thuế và phí</p>
                                        </div>
                                    </div>
                                    <input type="checkbox" class="product-checkbox"> <span>Chọn sản phẩm này</span>
                                </div>
                            </div>
                        </div>
                    </div>
    
                </div>
    
                <div class="col-md-3" style="position: fixed; right: 200px; ">
                    <div class="card">
                        <div class="card-body d-flex flex-column">
                            <h2 class="card-title">Tổng giá</h2>
                            <p class="total-price">0 đ</p>
                            <button class="btn btn-primary mt-auto">Tiến hành đặt chỗ</button>
                        </div>
                    </div>
                </div>
                
                
            </div>
        </div>

        <footer class="custom-footer">
            <div class="container">
                <div class="row list-footer">
                    <div class="col-3">
                        <img src="../../img/logo.png" alt="" />
                    </div>
                    <div class="col-3">
                        <h5>Về chúng tôi</h5>
                        <ul>
                            <li>Giới thiệu</li>
                            <li>Liên hệ</li>
                            <li>Truyền thông</li>
                            <li>Chi nhánh</li>
                        </ul>
                    </div>
                    <div class="col-3">
                        <h5>Danh mục</h5>
                        <ul>
                            <li>Khách sạn</li>
                            <li>Resort</li>
                            <li>Villa</li>
                            <li>Nhà hàng</li>
                        </ul>
                    </div>
                    <div class="col-3">
                        <h5>Khác</h5>
                        <ul>
                            <li>Hướng dẫn đặt phòng</li>
                            <li>Lịch sử thanh toán</li>
                            <li>Tuyển dụng</li>
                            <li>Đăng ký đối tác</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="license">
                <b
                    >© 1996 - 2024 Marriott International, Inc. Tất cả các quyền
                    được bảo lưu. Thông tin độc quyền của Marriott và Starwood
                    Việt Nam</b
                >
            </div>
        </footer>

        <script>
            window.addEventListener('DOMContentLoaded', (event) => {
        
                function getProductPrice(card) {
                    const priceElement = card.querySelector('.original-price');
                    return parseFloat(priceElement.textContent.replace(/[^\d.]/g, ''));
                }
        
                function calculateTotalPrice() {
                    const checkboxes = document.querySelectorAll('.product-checkbox');
                    let totalPrice = 0;
                    checkboxes.forEach((checkbox) => {
                        if (checkbox.checked) {
                            const card = checkbox.closest('.card');
                            totalPrice += getProductPrice(card);
                        }
                    });
                    return totalPrice;
                }
        
                function updateCartItemCount() {
                    const cartItemCount = document.querySelectorAll('.card').length - 2;
                    const cartTitle = document.getElementById('cartTitle');
                    if (cartTitle) {
                        cartTitle.textContent = `Xe đẩy hàng của quý khách (${cartItemCount})`;
                    } else {
                        console.error("Không tìm thấy tiêu đề giỏ hàng!");
                    }
                }
        
                function updateTotalPrice(amount) {
                    const totalPriceElement = document.querySelector('.total-price');
                    if (totalPriceElement) {
                        totalPriceElement.textContent = "" + formatCurrency(amount, "VND");
                    } else {
                        console.error("Không tìm thấy phần tử tổng giá!");
                    }
                }
        
                function showConfirmationDialog(card, index) {
                    swal({
                        text: "Quý khách có chắc chắn là muốn loại bỏ cái này khỏi xe đẩy hàng không?",                   
                        buttons: {
                                cancel: {
                                    text: "Hủy",
                                    value: null,
                                    visible: true,
                                    className: "",
                                    closeModal: true,
                                },
                                confirm: {
                                    text: "Ok",
                                    value: true,
                                    visible: true,
                                    className: "btn-confirm",
                                    closeModal: true,
                                }
                        },
                        dangerMode: true,
                    })
                    .then((willDelete) => {
                        if (willDelete) {
                            card.remove();
                            updateCartItemCount(); // Cập nhật lại tiêu đề giỏ hàng
                            const totalPrice = calculateTotalPrice(); // Tính lại tổng giá sau khi xóa sản phẩm
                            updateTotalPrice(totalPrice); // Cập nhật lại tổng giá
                        }
                    });
                }
    
                function formatCurrency(amount, currency) {
                    return amount.toLocaleString('vi-VN', {
                        style: 'currency',
                        currency: currency
                    });
                }
        
                function updateDeleteButtonsAndCheckboxes() {
                    const deleteButtons = document.querySelectorAll('.btn-delete');
                    deleteButtons.forEach((button, index) => {
                        button.addEventListener('click', (event) => {
                            const card = event.target.closest('.card');
                            showConfirmationDialog(card, index);
                        });
                    });
        
                    const checkboxes = document.querySelectorAll('.product-checkbox');
                    checkboxes.forEach((checkbox) => {
                        checkbox.addEventListener('change', () => {
                            const totalPrice = calculateTotalPrice();
                            updateTotalPrice(totalPrice);
                        });
                    });
                }
        
                // Cập nhật lần đầu tiên khi trang web tải lên
                updateDeleteButtonsAndCheckboxes();
                updateCartItemCount();
                const initialTotalPrice = calculateTotalPrice();
                updateTotalPrice(initialTotalPrice);
        
            });
        </script>

        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    </body>
</html>
